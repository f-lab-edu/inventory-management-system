openapi: 3.0.3
info:
  title: Supplier API
  description: 공급업체 API
  version: 1.0.0
  contact:
    name: 김수용
    email: hwasuyong99@naver.com

servers:
  - url: http://localhost:10002
    description: 로컬 개발 서버

paths:
  /api/v1/suppliers:
    post:
      summary: 공급업체 생성
      description: 새로운 공급업체를 생성합니다.
      operationId: createSupplier
      tags:
        - Supplier
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateSupplierRequest"
            examples:
              createSupplierExample:
                summary: 공급업체 생성 예시
                value:
                  name: "테스트 업체"
                  businessRegistrationNumber: "1234567890"
                  ceoName: "김대표"
                  postcode: "12345"
                  baseAddress: "서울특별시 강남구 테헤란로 123"
                  detailAddress: "456동 789호"
                  contact: "01012345678"
      responses:
        "201":
          description: 공급업체가 성공적으로 생성되었습니다.
          headers:
            Location:
              description: 생성된 공급업체의 URI
              schema:
                type: string
                example: "/api/v1/suppliers/1"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse_SupplierResponse"
              examples:
                successExample:
                  summary: 성공 응답 예시
                  value:
                    status: "CREATED"
                    message: "성공하였습니다."
                    data:
                      id: 1
                      name: "테스트 업체"
                      businessRegistrationNumber: "1234567890"
                      ceoName: "김대표"
                      postcode: "12345"
                      baseAddress: "서울특별시 강남구 테헤란로 123"
                      detailAddress: "456동 789호"
                      contact: "01012345678"
        "400":
          description: 잘못된 요청 데이터
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse_Error"
              examples:
                validationError:
                  summary: 유효성 검증 오류
                  value:
                    status: "BAD_REQUEST"
                    message: "입력 검증에 실패했습니다"
                    data: null
    get:
      summary: 공급업체 목록 조회
      description: 페이지네이션을 지원하는 공급업체 목록을 조회합니다.
      operationId: searchSupplier
      tags:
        - Supplier
      parameters:
        - name: currentPageNumber
          in: query
          description: 현재 페이지 번호 (0부터 시작)
          required: false
          schema:
            type: integer
            default: 0
            minimum: 0
          example: 0
        - name: pageSize
          in: query
          description: 페이지당 항목 수
          required: false
          schema:
            type: integer
            default: 30
            minimum: 1
            maximum: 100
          example: 30
      responses:
        "200":
          description: 공급업체 목록이 성공적으로 조회되었습니다.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse_PageResponse_SupplierResponse"
              examples:
                successExample:
                  summary: 성공 응답 예시
                  value:
                    status: "OK"
                    message: "성공하였습니다."
                    data:
                      content:
                        - id: 1
                          name: "테스트 업체"
                          businessRegistrationNumber: "1234567890"
                          ceoName: "김대표"
                          postcode: "12345"
                          baseAddress: "서울특별시 강남구 테헤란로 123"
                          detailAddress: "456동 789호"
                          contact: "01012345678"
                        - id: 2
                          name: "샘플 업체"
                          businessRegistrationNumber: "0987654321"
                          ceoName: "이대표"
                          postcode: "54321"
                          baseAddress: "부산광역시 해운대구 센텀로 456"
                          detailAddress: "789동 101호"
                          contact: "01098765432"
                      currentPageNumber: 0
                      pageSize: 30
                      totalElements: 2
                      totalPages: 1
                      hasNext: false
                      hasPrevious: false

  /api/v1/suppliers/{id}:
    get:
      summary: 공급업체 상세 조회
      description: 특정 ID의 공급업체 정보를 조회합니다.
      operationId: getSupplier
      tags:
        - Supplier
      parameters:
        - name: id
          in: path
          description: 공급업체 ID
          required: true
          schema:
            type: integer
            format: int64
            minimum: 1
          example: 1
      responses:
        "200":
          description: 공급업체 정보가 성공적으로 조회되었습니다.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse_SupplierResponse"
              examples:
                successExample:
                  summary: 성공 응답 예시
                  value:
                    status: "OK"
                    message: "성공하였습니다."
                    data:
                      id: 1
                      name: "테스트 업체"
                      businessRegistrationNumber: "1234567890"
                      ceoName: "김대표"
                      postcode: "12345"
                      baseAddress: "서울특별시 강남구 테헤란로 123"
                      detailAddress: "456동 789호"
                      contact: "01012345678"
        "404":
          description: 공급업체를 찾을 수 없습니다.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse_Error"
              examples:
                notFoundError:
                  summary: 리소스 없음 오류
                  value:
                    status: "NOT_FOUND"
                    message: "요청한 리소스를 찾을 수 없습니다"
                    data: null
    put:
      summary: 공급업체 정보 수정
      description: 특정 ID의 공급업체 정보를 수정합니다.
      operationId: updateSupplier
      tags:
        - Supplier
      parameters:
        - name: id
          in: path
          description: 공급업체 ID
          required: true
          schema:
            type: integer
            format: int64
            minimum: 1
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateSupplierRequest"
            examples:
              updateSupplierExample:
                summary: 공급업체 수정 예시
                value:
                  name: "테스트 업체 (수정)"
                  contact: "01099998888"
      responses:
        "200":
          description: 공급업체 정보가 성공적으로 수정되었습니다.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse_SupplierResponse"
              examples:
                successExample:
                  summary: 성공 응답 예시
                  value:
                    status: "OK"
                    message: "성공하였습니다."
                    data:
                      id: 1
                      name: "테스트 업체 (수정)"
                      businessRegistrationNumber: "1234567890"
                      ceoName: "김대표"
                      postcode: "12345"
                      baseAddress: "서울특별시 강남구 테헤란로 123"
                      detailAddress: "456동 789호"
                      contact: "01099998888"
        "404":
          description: 공급업체를 찾을 수 없습니다.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse_Error"
              examples:
                notFoundError:
                  summary: 리소스 없음 오류
                  value:
                    status: "NOT_FOUND"
                    message: "요청한 리소스를 찾을 수 없습니다"
                    data: null
    delete:
      summary: 공급업체 삭제
      description: 특정 ID의 공급업체를 삭제합니다.
      operationId: deleteSupplier
      tags:
        - Supplier
      parameters:
        - name: id
          in: path
          description: 공급업체 ID
          required: true
          schema:
            type: integer
            format: int64
            minimum: 1
          example: 1
      responses:
        "204":
          description: 공급업체가 성공적으로 삭제되었습니다.
        "404":
          description: 공급업체를 찾을 수 없습니다.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiResponse_Error"
              examples:
                notFoundError:
                  summary: 리소스 없음 오류
                  value:
                    status: "NOT_FOUND"
                    message: "요청한 리소스를 찾을 수 없습니다"
                    data: null

components:
  schemas:
    CreateSupplierRequest:
      type: object
      required:
        - name
        - businessRegistrationNumber
        - ceoName
        - postcode
        - baseAddress
        - contact
      properties:
        name:
          type: string
          description: 공급업체명
          minLength: 1
          maxLength: 100
          example: "테스트 업체"
        businessRegistrationNumber:
          type: string
          description: 사업자등록번호 (10자리 숫자)
          pattern: '^\d{10}$'
          example: "1234567890"
        ceoName:
          type: string
          description: 대표자명
          minLength: 1
          maxLength: 50
          example: "김대표"
        postcode:
          type: string
          description: 우편번호 (5자리 숫자)
          pattern: '^\d{5}$'
          example: "12345"
        baseAddress:
          type: string
          description: 기본주소
          minLength: 1
          maxLength: 200
          example: "서울특별시 강남구 테헤란로 123"
        detailAddress:
          type: string
          description: 상세주소
          maxLength: 100
          example: "456동 789호"
        contact:
          type: string
          description: 연락처
          minLength: 1
          maxLength: 20
          example: "01012345678"

    UpdateSupplierRequest:
      type: object
      description: 모든 필드가 선택사항입니다. 전송하지 않은 필드는 기존 값이 유지됩니다.
      properties:
        name:
          type: string
          description: 공급업체명
          maxLength: 100
          example: "테스트 업체 (수정)"
        businessRegistrationNumber:
          type: string
          description: 사업자등록번호 (10자리 숫자)
          pattern: '^\d{10}$'
          example: "1234567890"
        ceoName:
          type: string
          description: 대표자명
          maxLength: 50
          example: "김대표"
        postcode:
          type: string
          description: 우편번호 (5자리 숫자)
          pattern: '^\d{5}$'
          example: "12345"
        baseAddress:
          type: string
          description: 기본주소
          maxLength: 200
          example: "서울특별시 강남구 테헤란로 123"
        detailAddress:
          type: string
          description: 상세주소
          maxLength: 100
          example: "456동 789호"
        contact:
          type: string
          description: 연락처
          maxLength: 20
          example: "01099998888"

    SupplierResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 공급업체 ID
          example: 1
        name:
          type: string
          description: 공급업체명
          example: "테스트 업체"
        businessRegistrationNumber:
          type: string
          description: 사업자등록번호
          example: "1234567890"
        ceoName:
          type: string
          description: 대표자명
          example: "김대표"
        postcode:
          type: string
          description: 우편번호
          example: "12345"
        baseAddress:
          type: string
          description: 기본주소
          example: "서울특별시 강남구 테헤란로 123"
        detailAddress:
          type: string
          description: 상세주소
          example: "456동 789호"
        contact:
          type: string
          description: 연락처
          example: "01012345678"

    PageResponse:
      type: object
      properties:
        content:
          type: array
          description: 페이지 내용
          items:
            $ref: "#/components/schemas/SupplierResponse"
        currentPageNumber:
          type: integer
          description: 현재 페이지 번호 (0부터 시작)
          example: 0
        pageSize:
          type: integer
          description: 페이지당 항목 수
          example: 30
        totalElements:
          type: integer
          format: int64
          description: 전체 항목 수
          example: 25
        totalPages:
          type: integer
          description: 전체 페이지 수
          example: 3
        hasNext:
          type: boolean
          description: 다음 페이지 존재 여부
          example: true
        hasPrevious:
          type: boolean
          description: 이전 페이지 존재 여부
          example: false

    ApiResponse:
      type: object
      properties:
        status:
          type: string
          description: HTTP 상태
          example: "OK"
        message:
          type: string
          description: 응답 메시지
          example: "성공하였습니다."
        data:
          description: 응답 데이터

    ApiResponse_SupplierResponse:
      allOf:
        - $ref: "#/components/schemas/ApiResponse"
        - type: object
          properties:
            data:
              $ref: "#/components/schemas/SupplierResponse"

    ApiResponse_PageResponse_SupplierResponse:
      allOf:
        - $ref: "#/components/schemas/ApiResponse"
        - type: object
          properties:
            data:
              $ref: "#/components/schemas/PageResponse"

    ApiResponse_Error:
      allOf:
        - $ref: "#/components/schemas/ApiResponse"
        - type: object
          properties:
            status:
              type: string
              description: HTTP 상태 코드
              example: "BAD_REQUEST"
            message:
              type: string
              description: 에러 메시지
              example: "입력 검증에 실패했습니다"
            data:
              nullable: true
              description: 에러 시에는 항상 null
              example: null

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

tags:
  - name: Supplier
    description: 공급업체 관리 API
